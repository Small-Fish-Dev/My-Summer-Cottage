@namespace Sauna.UI
@attribute [StyleSheet]
@inherits Panel

<root>
	<div style="width: 50%; flex-direction: column;">
		<img class="title" src="ui/mainmenu/title.png" />
		<div style="flex-direction: column; justify-content: center; top: 38%; gap: 5px; width: 70%;">
			<SideButton
				ImagePath="ui/hud/goback.png"
				Title="Resume"
				Subtitle="Continue being Finnish"
				OnClick=@(() => { FullScreenManager.Instance.Display(FullScreenManager.FullScreenPanel.InGameHud); })
			/>

			<div style="height: 10px;" />

			<SideButton
				ImagePath="ui/hud/task_completed.png"
				Title="Tasks"
				Subtitle="Full history of your tasks"
				OnClick=@(() => { FullScreenManager.Instance.Display(FullScreenManager.FullScreenPanel.TaskLog); })
			/>
			<SideButton
				ImagePath="ui/hud/inv.png"
				Title="Inventory"
				Subtitle="Your inventory and stats"
				OnClick=@(() => { FullScreenManager.Instance.Display(FullScreenManager.FullScreenPanel.Inventory); })
			/>
			<SideButton
				ImagePath="ui/hud/fish_collection.png"
				Title="Fish Collection"
				Subtitle="All the kinds of fish you collected"
				OnClick=@(() => { FullScreenManager.Instance.Display(FullScreenManager.FullScreenPanel.FishLog); })
			/>
			<SideButton
				ImagePath="ui/hud/exit.png"
				Title="Quit"
				Subtitle="End this session and go back to the main menu"
				OnClick=@(() => 
				{ 
					GameNetworkSystem.Disconnect(); 
					MainMenu.PlayIntro = false; 
					SceneHandler.ChangeScene( SaunaScene.MainMenu ); 
				})
			/>
		</div>
	</div>
	<div style="width: 50%;">
		<div class="portraits">
			@{
				var players = Player.All.OrderBy((p) => p.Connection.IsHost);
				@foreach (var player in Player.All)
				{
					<PlayerPortrait Player=@player />
				}

				if ( players.Count() < NetworkManager.MAX_PLAYERS )
				{
					<div class="invite">+</div>
				}
			}
		</div>

		<div class="inputs">
			<InputHint Hint="Task Log" Input=@InputAction.Tasks />
			<InputHint Hint="Inventory" Input=@InputAction.Inventory />
			<InputHint Hint="(Hold) Zoom" Input=@InputAction.Zoom />
			<InputHint Hint="(Hold) Voice Chat" Input=@InputAction.Voice />
			<InputHint Hint="(Hold + No Pants on) Pee" Input=@InputAction.Piss />
		</div>
	</div>
</root>

@code {
	protected override int BuildHash()
	{
		return HashCode.Combine(Player.All.HashCombine((p) => p.ConnectionID.GetHashCode()));
	}
}
